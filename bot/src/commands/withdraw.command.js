// bot/src/commands/withdraw.command.js
const { Markup } = require('telegraf');
const config = require('../config');

/**
 * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /withdraw
 * @param {Object} ctx - –ö–æ–Ω—Ç–µ–∫—Å—Ç Telegraf
 */
async function withdrawCommand(ctx) {
  try {
    const { webAppUrl } = config;
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∏ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ WebApp
    await ctx.reply(
      'üí∏ –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤\n\n' +
      'üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:\n' +
      '1. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤—ã–≤–æ–¥–∞: 1 USDT\n' +
      '2. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤—ã–≤–æ–¥–∞: 10,000 USDT\n' +
      '3. –í—ã–≤–æ–¥—ã –¥–æ 300 USDT –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏\n' +
      '4. –í—ã–≤–æ–¥—ã —Å–≤—ã—à–µ 300 USDT —Ç—Ä–µ–±—É—é—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞\n' +
      '5. –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: –æ—Ç 5 –º–∏–Ω—É—Ç –¥–æ 48 —á–∞—Å–æ–≤\n\n' +
      '‚ö†Ô∏è –í–∞–∂–Ω–æ:\n' +
      '‚Ä¢ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Telegram username –ø–æ–ª—É—á–∞—Ç–µ–ª—è\n' +
      '‚Ä¢ Username –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–µ–∑ —Å–∏–º–≤–æ–ª–∞ @\n' +
      '‚Ä¢ –ü–æ–ª—É—á–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ @CryptoBot\n\n' +
      '–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –≤—ã–≤–æ–¥–∞:',
      Markup.inlineKeyboard([
        [Markup.button.webApp('üí∏ –û—Ñ–æ—Ä–º–∏—Ç—å –≤—ã–≤–æ–¥', `${webAppUrl}?screen=withdraw`)],
        [Markup.button.callback('üìã –ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–æ–≤', 'withdrawals_history')]
      ])
    );
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–æ–º–∞–Ω–¥—ã /withdraw:', error);
    await ctx.reply('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
  }
}

module.exports = withdrawCommand;